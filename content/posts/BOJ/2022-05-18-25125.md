---
layout: post
title: "[BOJ 25125] Squary"
date: 2022-05-18 19:45:00 +0900
categories: ["BOJ"]
tags: ["Math"]
katex: true
description: "배열에 수를 추가해서 합의 제곱과 제곱의 합을 같게 만드는 문제"
---

# [문제](https://www.acmicpc.net/problem/25125)

Google Code Jam 2022 Round 1C B번 문제입니다.

# 풀이

문제를 다시 써보면, 어떤 수열 $ E_1, E_2, \cdots , E_n$이 주어졌을 때, 1개 이상 $K$개 이하의 수를 여기에 추가해서 전체 합의 제곱이랑 각 수의 제곱의 합이 같게 만들어야 합니다. 바로 보이지는 않으므로 수를 1개, 2개, 3개 등 추가해서 만들 수 있는지, 어떻게 추가해야 하는지 생각하는 방향으로 문제를 풀어보면 될 것 같습니다.

## 수를 1개 추가

우선 수를 1개만 추가하는 추가하는 경우를 봅시다. $\Sigma E_i$와 $\Sigma E_i^2$의 관계가 그다지 직관적으로 보이지 않으므로, 각각을 $A = \Sigma E_i$와 $B = \Sigma E_i^2$으로 놓고 생각해봅시다.

그렇게 변수를 정하고 나면, 문제에서 요구하는 바가 ${\left( A+x \right)}^2 = B^2 + x^2$인 $x$를 구하라는 문제로 바뀝니다. 훨씬 접근하기 쉬워졌네요. 이를 마저 $x$에 대해서 정리해보면 $Ax = \frac{B-A^2}{2}$를 얻습니다.

한편, 모든 $i$에 대해 $E_i$와 $E_i^2$는 당연히 홀짝성이 같습니다. 따라서 자연스럽게 $A$와 $B$도 홀짝성이 같습니다. 즉, $\frac{B-A^2}{2}$는 언제나 정수입니다. 따라서 $\frac{B-A^2}{2}$가 $A$로 나눠떨어지면 조건을 만족하는 $x$가 있는 것이고, 아니면 없는 것이라고 결론지을 수 있습니다. $A=0$인 경우만 주의해서 처리해주면 되겠습니다.

## 수를 2개 추가

그럼 수를 2개 추가하는 경우를 생각해봅시다. 동일하게 생각해서,

$$ {\left( A+x+y \right)}^2 = B + x^2 + y^2 $$

인 $x$와 $y$를 찾으면 됩니다. 식을 정리해보면 아래와 같습니다.

$$
A^2 + x^2 + y^2 + 2Ax + 2Ay + 2xy = B + x^2 + y^2 \\\\
A^2 + 2Ax + 2Ay + 2xy = B
$$

이를 $(A+x)(A+y) = A^2 + Ax + Ay + xy$라는 점을 활용해서 정리하면 최종적으로

$$
\frac{B+A^2}{2} = (A+x)(A+y)
$$

를 얻습니다. 앞서 나온 홀짝성 논리를 그대로 적용하면 $\frac{B + A^2}{2}$는 무조건 정수입니다. 따라서, $x$와 $y$의 값은 다음과 같이 무조건 존재합니다.

$$
x = 1-A \qquad\qquad y = \frac{B + A^2}{2} - A
$$

이제 문제에서 입력을 받았을 때, $K=1$이면 수를 1개만 추가하는 방향으로 가면 되고, 수를 2개 추가할 수 있을 땐 무조건 답이 존재하니 $K$가 2 이상일 땐 수를 2개 추가하는 경우를 그대로 따라가면 됩니다.
